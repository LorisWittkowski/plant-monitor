import { kv } from "@vercel/kv";
export default async function handler(_req,res){ const ids = await kv.smembers('soil:sensors'); const sensors=[]; for(const id of ids){ const cfg = await kv.get(`soil:${id}:config`); sensors.push({ id, name: cfg?.name||null, calibrated: !!(cfg?.rawDry!=null && cfg?.rawWet!=null) }); } res.json({ sensors }); }